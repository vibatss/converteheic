<!-- ... até aqui o cabeçalho continua igual ... -->

      <button class="btn" onclick="comprimirImagem()">Comprimir</button>

      <!-- NOVO: botão de baixar igual ao botão 'Converter' -->
      <a id="botaoDownload" class="btn" href="#" download style="display: none; margin-top: 20px;">⬇️ Baixar imagem comprimida</a>

      <p id="tamanho-final"></p>
    </div>
  </div>

<!-- ... rodapé continua igual ... -->

<script>
  const uploadInput = document.getElementById("upload");
  const preview = document.getElementById("preview");
  const info = document.getElementById("info");
  const canvas = document.getElementById("canvas");
  const downloadBtn = document.getElementById("botaoDownload");

  let imagemOriginal;

  info.style.display = "none";

  uploadInput.addEventListener("change", () => {
    const file = uploadInput.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      const img = new Image();
      img.onload = function() {
        imagemOriginal = img;
        preview.innerHTML = "";
        preview.appendChild(img);

        document.getElementById("tamanho-original").textContent =
          `Tamanho original: ${(file.size / 1024).toFixed(1)} KB`;

        info.style.display = "block";
        downloadBtn.style.display = "none";
      };
      img.src = e.target.result;
    };
    reader.readAsDataURL(file);
  });

  function comprimirImagem() {
    const qualidade = parseFloat(document.getElementById("qualidade").value);
    const largura = imagemOriginal.naturalWidth;
    const altura = imagemOriginal.naturalHeight;

    canvas.width = largura;
    canvas.height = altura;

    const ctx = canvas.getContext("2d");
    ctx.drawImage(imagemOriginal, 0, 0, largura, altura);

    canvas.toBlob(blob => {
      const url = URL.createObjectURL(blob);

      // Mostra o botão estilizado de download
      downloadBtn.href = url;
      downloadBtn.download = "imagem-comprimida.jpg";
      downloadBtn.style.display = "inline-block";

      document.getElementById("tamanho-final").textContent =
        `Tamanho após compressão: ${(blob.size / 1024).toFixed(1)} KB`;
    }, "image/jpeg", qualidade);
  }
</script>
